/* globals global */
jQuery(function($){
    var searchRequest;
    $('.search-autocomplete').autoComplete({
        minChars: 2,
        source: function(term, suggest){
            try { searchRequest.abort(); } catch(e){}
            searchRequest = $.post($('.ajax_url').val(), { search: term, action: 'search_site' }, function(res) {
                suggest(res.data);
            });
        },
        onSelect: function( event, ui ) {
            var homeUrl = $('.home_url').val()
            $('.search-autocomplete').val(event.currentTarget.innerText)
            window.location.href = homeUrl + '/' + event.currentTarget.dataset.val
        },
    });
});
